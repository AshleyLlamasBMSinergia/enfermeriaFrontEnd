<div class="content">
    <div class="container-fluid">
        <div class="card">
            <div class="card-header bg-pink1">
                <p class="font-weight-bold mb-1">Profesional</p>
                <div>
                    <img [src]="imageProfesional" alt="Product 1" class="img-circle img-size-32 mr-2 mb-1">
                    {{ profesional?.nickname }}
                </div>
            </div>
            <form [formGroup]="formIncapacitacion" (ngSubmit)="guardar()">
                <div class="border-footer px-3 bg-pink2">
                    <div class="row">
                        <div class="col-12">
                            <div class="form-group">
                                <label class="col-form-label">
                                    Empleado
                                    <span class="text-danger">*</span>
                                </label>
                                <div class="form-group">
                                    <ngx-select [items]="opcionesEmpleados" (select)="cargarDatosEmpleado($event)">
                                        <ng-content select="value"></ng-content>
                                    </ngx-select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div *ngIf="historialMedico?.pacientable">
                        <div class="row pt-3">
                            <div class="col-12 col-md-6">
                                <div class="d-flex flex-column align-items-center bg-pink2 h-100 shadow">
                                    <img [src]="imageEmpleado" alt="Admin" class="rounded-circle img-border img-circle mt-3"
                                      width="150">
                                    <div class="mt-3 text-center">
                                        <h4>
                                            {{ historialMedico?.pacientable?.nombre }}
                                        </h4>
                                        <p class="py-3">
                                            <a [routerLink]="['/enfermeria/historiales-medicos', historialMedico?.id]" target="_blank">Ver historial médico</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-12 col-md-6">
                                <div class="form-group">
                                    <label class="col-form-label">
                                        Tipo de incidencia
                                      <span class="text-danger">*</span>
                                    </label>
                                    <select class="form-control" formControlName="TipoIncidencia">
                                        <option *ngFor="let tipoIncidencia of tipoIncidencias" [value]="tipoIncidencia.TipoIncidencia">{{ tipoIncidencia.Nombre }}</option>
                                    </select>
                                </div>
                                <div class="row">
                                    <div class="form-group col-12 col-xl-8">
                                        <label class="col-form-label">
                                            Fecha efectiva
                                            <span class="text-danger">*</span>
                                        </label>
                                        <input type="date" id="FechaEfectiva" class="form-control text-center" formControlName="FechaEfectiva">
                                    </div>
                                    <div class="form-group col-12 col-xl-4">
                                        <label class="col-form-label">
                                            Días que aplica
                                            <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" id="Dias" class="form-control text-center" formControlName="Dias">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-form-label">
                                        Folio
                                        <span class="text-danger">*</span>
                                    </label>
                                    <input type="text" id="Folio" class="form-control text-center" formControlName="Folio">
                                </div>
                                <div class="form-group">
                                    <label class="col-form-label">
                                        Diagnóstico
                                        <span class="text-danger">*</span>
                                    </label>
                                    <ckeditor [editor]="Editor" [config]="editorConfig" id="diagnostico" formControlName="diagnostico"></ckeditor>
                                </div>
                            </div>
                        </div>
                        <div class="border rounded mt-3" *ngIf="!(formIncapacitacion.get('TipoIncidencia')!.value === 'PP' ||
                        formIncapacitacion.get('TipoIncidencia')!.value === 'PG')">
                            <div class="m-2">
                                <div class="border-bottom">
                                    <h5 class="py-1 text-center">Datos de incapacidad</h5>
                                </div>
                                <div class="row">
                                    <div class="form-group col-12">
                                        <label class="col-form-label">
                                            Tipo de Riesgo
                                          <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-control" formControlName="TipoRiesgo">
                                            <option *ngFor="let tipoRiesgo of tipoRiesgos" [value]="tipoRiesgo.TipoRiesgo">{{ tipoRiesgo.Nombre }}</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-12">
                                        <label class="col-form-label">
                                            Secuela
                                          <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-control" formControlName="Secuela">
                                            <option *ngFor="let secuela of secuelas" [value]="secuela.Secuela">{{ secuela.Nombre }}</option>
                                        </select>
                                    </div>
                                    <div class="form-group col-12">
                                        <label class="col-form-label">
                                            Control incapacidad
                                          <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-control" formControlName="ControlIncapacidad">
                                            <option *ngFor="let controlIncapacidad of controlIncapacidades" [value]="controlIncapacidad.ControlIncapacidad">{{ controlIncapacidad.Nombre }}</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label>
                                            Zonas afectadas
                                            <span class="text-danger">*</span>
                                        </label>
                                        <ngx-select
                                            [items]="zonasAfectadas"
                                            [multiple]="true"
                                            placeholder="Seleccione todos los medicamentos asociados al insumo"
                                            [formControlName]="'zonasAfectadas'"
                                        ></ngx-select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="border rounded mt-3" *ngIf="formIncapacitacion.get('TipoIncidencia')!.value === 'PP' ||
                        formIncapacitacion.get('TipoIncidencia')!.value === 'PG'">
                            <div class="m-2">
                                <div class="border-bottom">
                                    <h5 class="py-1 text-center">Datos del permiso</h5>
                                </div>
                                <div class="row">
                                    <div class="form-group col-12">
                                        <label class="col-form-label">
                                            Tipo de permiso
                                          <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-control" formControlName="TipoPermiso">
                                            <option *ngFor="let tipoPermiso of tipoPermisos" [value]="tipoPermiso.TipoPermiso">{{ tipoPermiso.Nombre }}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-form-label">
                                Observaciones
                            </label>
                            <ckeditor [editor]="Editor" [config]="editorConfig" id="observaciones" formControlName="observaciones"></ckeditor>
                        </div>
                    </div>
                </div>
                <div class="card-footer">
                    <div *ngIf="mensajesDeError.length > 0" class="text-danger py-3">
                        <ul class="list-group">
                            <li class="list-group-item list-group-item-danger" *ngFor="let mensaje of mensajesDeError">{{ mensaje }}</li>
                        </ul>
                    </div>
                    <div class="text-center">
                        <button class="btn bg-pink">Guardar</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>